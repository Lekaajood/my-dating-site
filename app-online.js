
async function fetchIndex(){ const r = await fetch('profiles/index.json'); window.INDEX = await r.json(); }
async function fetchProfile(id){ const r = await fetch('profiles/'+id+'.json'); return await r.json(); }
function renderOnline(){ const root=document.getElementById('onlineCards'); const list=window.INDEX.slice(0,12); root.innerHTML = list.map(e=>`<div class="card"><img src="${e.photo}"><div class="body"><div class="name">${e.name}</div><div class="meta">الهواية: ${e.hobby}</div><div class="actions"><a class="btn" onclick="openProfileFromList(${e.id})">عرض</a></div></div></div>`).join(''); }
window.openProfileFromList = async function(id){ const p = await fetchProfile(id); const modal=document.getElementById('profileModal'); const body=document.getElementById('profileBody'); body.innerHTML = `<div style="display:flex;gap:12px"><img src="${p.photo}" style="width:160px;height:160px;object-fit:cover;border-radius:8px"><div style="flex:1"><div class="detail"><div>الاسم</div><div>${p.name}</div></div><div class="detail"><div>العمر</div><div>${p.age}</div></div><div class="detail"><div>المدينة</div><div>${p.city}</div></div></div></div>`; modal.classList.remove('hidden'); }
document.addEventListener('DOMContentLoaded', async ()=>{ await fetchIndex(); renderOnline(); document.getElementById('closeProfile').addEventListener('click', ()=>document.getElementById('profileModal').classList.add('hidden')); });
